{"ast":null,"code":"import React,{Component}from'react';import'./App.css';import Todo from'./Todo';import NewTodo from'./NewTodo';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";class App extends Component{constructor(props){super(props);this.handleSubmit=event=>{event.preventDefault();const input=event.target.elements.inputtext;const text=input.value;const self=this;const apiKey='7cfc00-0dc6d4-b0f90b-4d1861-9b39aa';if(text!==''){const todo_obj={text:text,completed:false,created:Date.now()};var xhttp2=new XMLHttpRequest();xhttp2.onreadystatechange=function(){if(this.readyState===4&&this.status===200){self.tempfunction();}};xhttp2.open(\"POST\",\"https://cse204.work/todos\",true);xhttp2.setRequestHeader(\"Content-type\",\"application/json\");xhttp2.setRequestHeader(\"x-api-key\",apiKey);xhttp2.send(JSON.stringify(todo_obj));input.value=\"\";}};this.sortItems=()=>{const stateDupe=[...this.state.todos];stateDupe.sort((a,b)=>a.text.localeCompare(b.text));this.setState({todos:stateDupe});};this.tempfunction=()=>{const self=this;const apiKey='7cfc00-0dc6d4-b0f90b-4d1861-9b39aa';var xhttp=new XMLHttpRequest();xhttp.onreadystatechange=function(){if(this.readyState===4&&this.status===200){self.setState({todos:JSON.parse(this.responseText)});//console.log('new run');\n//console.log(self.state.todos);\n}};xhttp.open(\"GET\",\"https://cse204.work/todos\",true);xhttp.setRequestHeader(\"x-api-key\",apiKey);xhttp.send();};this.componentDidMount=()=>{const self=this;const apiKey='7cfc00-0dc6d4-b0f90b-4d1861-9b39aa';var xhttp=new XMLHttpRequest();xhttp.onreadystatechange=function(){if(this.readyState===4&&this.status===200){self.setState({todos:JSON.parse(this.responseText)});self.sortItems();}};xhttp.open(\"GET\",\"https://cse204.work/todos\",true);xhttp.setRequestHeader(\"x-api-key\",apiKey);xhttp.send();};this.state={todos:[{\"id\":\"123\",\"text\":\"test text\",\"user\":\"user 1233\",\"completed\":false,\"created_at\":\"2020-10-14 18:02:29\",\"updated_at\":\"2020-10-14 18:02:31\"}]};}checkEvent(todo){const thisStore=this;const apiKey='7cfc00-0dc6d4-b0f90b-4d1861-9b39aa';var xhttp2=new XMLHttpRequest();xhttp2.onreadystatechange=function(){if(this.readyState===4&&this.status===200){let items=[...thisStore.state.todos];let tempindex=items.indexOf(element=>element.id=todo.id);let item={...items[tempindex]};item=JSON.parse(this.responseText);items[tempindex]=item;thisStore.setState(items);}};xhttp2.open(\"PUT\",\"https://cse204.work/todos/\"+todo.id,true);xhttp2.setRequestHeader(\"Content-type\",\"application/json\");xhttp2.setRequestHeader(\"x-api-key\",apiKey);todo.completed=!todo.completed;xhttp2.send(JSON.stringify(todo));}deleteEvent(todo){let self=this;const apiKey='7cfc00-0dc6d4-b0f90b-4d1861-9b39aa';var xhttp2=new XMLHttpRequest();xhttp2.onreadystatechange=function(){if(this.readyState===4&&this.status===200){self.tempfunction();}};xhttp2.open(\"DELETE\",\"https://cse204.work/todos/\"+todo.id,true);xhttp2.setRequestHeader(\"Content-type\",\"application/json\");xhttp2.setRequestHeader(\"x-api-key\",apiKey);xhttp2.send();}render(){return/*#__PURE__*/_jsx(\"div\",{className:\"big-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"todo-header\",children:\" todo list\"}),/*#__PURE__*/_jsx(NewTodo,{onSubmit:this.handleSubmit,onClick:this.handleSubmit}),/*#__PURE__*/_jsx(\"ul\",{className:\"todo-ul\",id:\"todo-ul\",children:this.state.todos.map(todo=>/*#__PURE__*/_jsx(Todo,{text:todo.text,id:todo.id,completed:todo.completed,checkEvent:()=>this.checkEvent(todo),deleteEvent:()=>this.deleteEvent(todo)},todo.id))}),/*#__PURE__*/_jsx(\"div\",{className:\"sort-container\",children:/*#__PURE__*/_jsx(\"button\",{className:\"sort-btn\",id:\"sort-btn\",autofocus:true,type:\"button\",value:\"sort items alphabetically\",onClick:this.sortItems,children:\" sort items alphabetically\"})})]})});}}export default App;","map":{"version":3,"names":["React","Component","Todo","NewTodo","jsx","_jsx","jsxs","_jsxs","App","constructor","props","handleSubmit","event","preventDefault","input","target","elements","inputtext","text","value","self","apiKey","todo_obj","completed","created","Date","now","xhttp2","XMLHttpRequest","onreadystatechange","readyState","status","tempfunction","open","setRequestHeader","send","JSON","stringify","sortItems","stateDupe","state","todos","sort","a","b","localeCompare","setState","xhttp","parse","responseText","componentDidMount","checkEvent","todo","thisStore","items","tempindex","indexOf","element","id","item","deleteEvent","render","className","children","onSubmit","onClick","map","autofocus","type"],"sources":["/Users/sammyhong/Downloads/todo-react-kenwhitestone-main/src/App.js"],"sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport Todo from './Todo';\nimport NewTodo from './NewTodo';\n\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      todos: [\n        {\n          \"id\": \"123\",\n          \"text\": \"test text\",\n          \"user\": \"user 1233\",\n          \"completed\": false,\n          \"created_at\": \"2020-10-14 18:02:29\",\n          \"updated_at\": \"2020-10-14 18:02:31\",\n        }\n      ],\n    }\n  }\n\n  handleSubmit = event => {\n    event.preventDefault();\n    const input = event.target.elements.inputtext;\n    const text = input.value;\n    const self = this;\n    const apiKey = '7cfc00-0dc6d4-b0f90b-4d1861-9b39aa';\n    if (text !== '') {\n      const todo_obj = {\n        text: text,\n        completed: false,\n        created: Date.now(),\n      }\n      var xhttp2 = new XMLHttpRequest();\n      xhttp2.onreadystatechange = function () {\n        if (this.readyState === 4 && this.status === 200) {\n          self.tempfunction();\n        }\n      };\n      xhttp2.open(\"POST\", \"https://cse204.work/todos\", true);\n      xhttp2.setRequestHeader(\"Content-type\", \"application/json\");\n      xhttp2.setRequestHeader(\"x-api-key\", apiKey);\n      xhttp2.send(JSON.stringify(todo_obj));\n      input.value = \"\";\n    }\n  };\n\n  sortItems = () => {\n    const stateDupe = [...this.state.todos];\n    stateDupe.sort((a, b) => a.text.localeCompare(b.text));\n    this.setState({ todos: stateDupe });\n  }\n\n  tempfunction = () => {\n    const self = this;\n    const apiKey = '7cfc00-0dc6d4-b0f90b-4d1861-9b39aa';\n    var xhttp = new XMLHttpRequest();\n    xhttp.onreadystatechange = function () {\n      if (this.readyState === 4 && this.status === 200) {\n        self.setState({ todos: JSON.parse(this.responseText) });\n        //console.log('new run');\n        //console.log(self.state.todos);\n      }\n    };\n    xhttp.open(\"GET\", \"https://cse204.work/todos\", true);\n    xhttp.setRequestHeader(\"x-api-key\", apiKey);\n    xhttp.send();\n  }\n\n  checkEvent(todo) {\n    const thisStore = this;\n    const apiKey = '7cfc00-0dc6d4-b0f90b-4d1861-9b39aa';\n    var xhttp2 = new XMLHttpRequest();\n    xhttp2.onreadystatechange = function () {\n      if (this.readyState === 4 && this.status === 200) {\n        let items = [...thisStore.state.todos];\n        let tempindex = items.indexOf(element => element.id = todo.id)\n        let item = { ...items[tempindex] };\n        item = JSON.parse(this.responseText);\n        items[tempindex] = item;\n        thisStore.setState(items);\n      }\n    };\n    xhttp2.open(\"PUT\", \"https://cse204.work/todos/\" + todo.id, true);\n    xhttp2.setRequestHeader(\"Content-type\", \"application/json\");\n    xhttp2.setRequestHeader(\"x-api-key\", apiKey);\n    todo.completed = !todo.completed;\n    xhttp2.send(JSON.stringify(todo));\n  }\n\n  deleteEvent(todo) {\n    let self = this;\n    const apiKey = '7cfc00-0dc6d4-b0f90b-4d1861-9b39aa';\n    var xhttp2 = new XMLHttpRequest();\n    xhttp2.onreadystatechange = function () {\n      if (this.readyState === 4 && this.status === 200) {\n        self.tempfunction();\n      }\n    };\n    xhttp2.open(\"DELETE\", \"https://cse204.work/todos/\" + todo.id, true);\n    xhttp2.setRequestHeader(\"Content-type\", \"application/json\");\n    xhttp2.setRequestHeader(\"x-api-key\", apiKey);\n    xhttp2.send();\n  }\n\n  componentDidMount = () => {\n    const self = this;\n    const apiKey = '7cfc00-0dc6d4-b0f90b-4d1861-9b39aa';\n    var xhttp = new XMLHttpRequest();\n    xhttp.onreadystatechange = function () {\n      if (this.readyState === 4 && this.status === 200) {\n        self.setState({ todos: JSON.parse(this.responseText) });\n        self.sortItems();\n      }\n    };\n    xhttp.open(\"GET\", \"https://cse204.work/todos\", true);\n    xhttp.setRequestHeader(\"x-api-key\", apiKey);\n    xhttp.send();\n  }\n\n  render() {\n    return (\n      <div className=\"big-container\">\n        <div className=\"container\">\n          <h1 className=\"todo-header\"> todo list</h1>\n\n          <NewTodo onSubmit={this.handleSubmit} onClick={this.handleSubmit} />\n\n          <ul className=\"todo-ul\" id=\"todo-ul\">\n            {this.state.todos.map((todo) =>\n              <Todo\n                text={todo.text}\n                key={todo.id}\n                id={todo.id}\n                completed={todo.completed}\n                checkEvent={() => this.checkEvent(todo)}\n                deleteEvent={() => this.deleteEvent(todo)} />\n            )}\n          </ul>\n          <div className='sort-container'>\n            <button\n              className=\"sort-btn\"\n              id=\"sort-btn\"\n              autofocus type=\"button\"\n              value=\"sort items alphabetically\"\n              onClick={this.sortItems}\n            > sort items alphabetically\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}